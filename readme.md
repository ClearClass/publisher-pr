## О проекте

Пример реализации клиент-серверного взаимодействия по REST в соответствии с шаблоном "publisher-subscriber". Клиентская часть осуществляет генерацию и отправку json-сообщений (методом POST) на сервер-подписчик, который возвращает в теле ответа принятое сообщение.

Структура сообщения:

* `ID` - идентификатор сообщения; автоинкрементируется в каждом новом сообщении.
* `Msisdn` - уникальный номер абонента (в данном проекте - случайное число из диапазона 0..99999).
* `Action` - тип сообщения:`PURCHASE` или `SUBSCRIPTION`. Значение выбирается случайно при генерации сообщения.
* `Timestamp` - UNIX timestamp.

Пример сообщения:

    {
        "id": 1,
        "msisdn": 12345,
        "action": "PURCHASE",
        "timestamp": 1589464122
    }
    
Серверная часть проекта: [https://github.com/ClearClass/subscriber-pr](https://github.com/ClearClass/subscriber-pr)

### Описание классов

Пакет `entity` содержит объявление сущностного класса `Message` и перечисления `MessageType`, представляющего тип передаваемого сообщения. В классе `Message` статическая переменная `curr_id` представляет собой счетчик сообщений, который инкрементируется каждый раз при вызове конструктора `Message`. Текущее значение счетчика сохраняется в поле `id` объекта `Message`. Остальные параметры передаются конструктору извне.

Перечисление `MessageType` содержит статический метод `random()`, возвращающий случайным образом объект `PURCHASE` или `SUBSCRIPTION`.

В пакете `logic` содержится класс `MessageGenerator` со статическим методом `get()`, возвращающим экземпляр `Message`. Параметр `Msisdn` генерируется при загрузке класса `MessageGenerator` и сохраняется как константа в статической переменной `msisdn`.

Класс `PublishThread` инкапсулирует поток исполнения, в котором производится создание нового сообщения, его отправка с использованием `RestTemplate`, и прием ответного сообщения в виде объекта `Message`. Всего в каждом потоке создается и отправляется 4 сообщения с паузой 15 сек.

В методе `main()` производится создание пяти потоковых объектов, их запуск, и ожидание завершения потоков.

### История версий

* Версия 1.0 - базовая версия.
* Версия 1.1 - тип переменной `curr_id` в классе `Message` изменен на `AtomicLong`.

